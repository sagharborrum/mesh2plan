<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>mesh2plan v27f — Watershed Room Segmentation</title>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body { background: #1a1a2e; color: #eee; font-family: system-ui, sans-serif; padding: 20px; }
h1 { font-size: 24px; color: #00E5FF; margin-bottom: 8px; }
.desc { color: #aaa; font-size: 14px; line-height: 1.6; margin-bottom: 20px; max-width: 900px; }
.results { display: flex; gap: 20px; flex-wrap: wrap; }
.card { background: rgba(20,20,40,0.8); border-radius: 12px; padding: 16px; border: 1px solid rgba(255,255,255,0.1); flex: 1; min-width: 400px; }
.card h2 { font-size: 16px; color: #888; margin-bottom: 12px; }
.card img { width: 100%; border-radius: 8px; }
.stats { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-top: 12px; }
.stat { background: rgba(0,0,0,0.3); padding: 8px 12px; border-radius: 6px; }
.stat-label { font-size: 11px; color: #666; text-transform: uppercase; }
.stat-value { font-size: 18px; font-weight: bold; color: #00E5FF; }
.badge { display: inline-block; padding: 4px 10px; border-radius: 12px; font-size: 12px; font-weight: bold; margin-right: 6px; }
.badge-new { background: rgba(255,0,128,0.2); color: #FF0080; }
.badge-approach { background: rgba(255,165,0,0.2); color: #FFA500; }
nav { margin-bottom: 20px; }
nav a { color: #00E5FF; margin-right: 12px; font-size: 13px; }
h3 { color: #FFA500; margin: 20px 0 10px; }
</style>
</head>
<body>
<nav><a href="index.html">← All Versions</a> <a href="v27.html">v27</a> <a href="v27e.html">v27e</a> <a href="v27f.html">v27f</a></nav>
<h1>v27f — Watershed Room Segmentation</h1>
<span class="badge badge-new">NEW</span>
<span class="badge badge-approach">Watershed</span>
<div class="desc">
<p>Uses OpenCV watershed segmentation on the density image. High-density wall regions
become the ridges/barriers, and low-density room interiors (found via distance transform)
become the seeds. Watershed grows each seed region until hitting wall boundaries.</p>
<p>Key advantage: watershed naturally handles irregular room shapes and doesn't require
axis-aligned splits. Gets 6 rooms on multiroom mesh with good total area coverage.</p>
</div>

<h3>Multiroom (target: 5-7 rooms)</h3>
<div class="results">
<div class="card">
<h2>5-Panel Analysis</h2>
<img src="results/v27f/multiroom/v27f_export_refined_floorplan.png" alt="v27f multiroom">
<div class="stats">
<div class="stat"><div class="stat-label">Rooms</div><div class="stat-value">6</div></div>
<div class="stat"><div class="stat-label">Total Area</div><div class="stat-value">28.2 m²</div></div>
</div>
</div>
</div>

<h3>Single Room (target: 1 room, 10.4 m²)</h3>
<div class="results">
<div class="card">
<h2>5-Panel Analysis</h2>
<img src="results/v27f/single/v27f_export_refined_floorplan.png" alt="v27f single">
<div class="stats">
<div class="stat"><div class="stat-label">Rooms</div><div class="stat-value">2</div></div>
<div class="stat"><div class="stat-label">Total Area</div><div class="stat-value">9.8 m²</div></div>
</div>
</div>
</div>
</body>
</html>
